---
- name: Copy pacman configuration file
  copy:
    src: pacman.conf
    dest: /etc/pacman.conf

- name: Refresh pacman mirrors
  pacman:
    update_cache: yes

- name: Set the hostname
  hostname:
    name: "{{ hostname }}"
  when: hostname is defined

- name: Set the hosts file
  lineinfile:
    path: /etc/hosts
    create: yes
    state: present
    line: "{{ item }}"
  with_items:
    - 127.0.0.1  localhost
    - ::1        localhost
    - 127.0.1.1  {{ hostname }}.localdomain {{ hostname }}

- include: timezone.yml
- include: locale.yml
- include: shell.yml
- include: user.yml
- include: sudo.yml
- include: gpg.yml
- include: packages.yml
- include: journal.yml
